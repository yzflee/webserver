import pstats
import pprint

# strip_dirs(): 去掉无关的路径信息
# sort_stats(): 排序，支持的方式和上述的一致
# print_stats(): 打印分析结果，可以指定打印前几行

# 和直接运行cProfile.run("test()")的结果是一样的
#p.strip_dirs().sort_stats(-1).print_stats()

# 按照函数名排序，只打印前3行函数的信息, 参数还可为小数,表示前百分之几的函数信息
#p.strip_dirs().sort_stats("tottime").print_stats(3)

# 按照运行时间进行排序
#p.strip_dirs().sort_stats("cumulative").print_stats(1)

# 如果想知道有哪些函数调用了sum_num
#p.print_callers(0.5, "sum_num")

# 查看test()函数中调用了哪些函数
#p.print_callees("test")

p=pstats.Stats("profile\TriFusion_1847ae4755_0.prof")

p.strip_dirs().print_callers()  # 可以显示函数被哪些函数调用
p.strip_dirs().print_callees()  # 可以显示哪个函数调用了哪些函数